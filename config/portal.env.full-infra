# =============================================================================
# EZY Portal - Full Infrastructure Configuration
# =============================================================================
# Use this template when deploying PostgreSQL, Redis, RabbitMQ as containers
# alongside the portal (docker-compose.full.yml)
# =============================================================================

INFRASTRUCTURE_MODE=full
VERSION=latest
PROJECT_NAME=ezy-portal

# -----------------------------------------------------------------------------
# DATABASE (Deployed as container)
# -----------------------------------------------------------------------------
POSTGRES_DB=portal
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_SECURE_DB_PASSWORD
ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=portal;Username=postgres;Password=CHANGE_ME_SECURE_DB_PASSWORD

# -----------------------------------------------------------------------------
# REDIS (Deployed as container)
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
ConnectionStrings__Redis=redis:6379

# -----------------------------------------------------------------------------
# RABBITMQ (Deployed as container)
# -----------------------------------------------------------------------------
RabbitMq__Enabled=false
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=portal
RABBITMQ_PASSWORD=CHANGE_ME_SECURE_RMQ_PASSWORD
RABBITMQ_DEFAULT_USER=portal
RABBITMQ_DEFAULT_PASS=CHANGE_ME_SECURE_RMQ_PASSWORD

# Uncomment to enable RabbitMQ for Universal Search:
# RabbitMq__Enabled=true
# RabbitMq__Host=rabbitmq
# RabbitMq__Port=5672
# RabbitMq__User=portal
# RabbitMq__Password=CHANGE_ME_SECURE_RMQ_PASSWORD
# RabbitMq__VirtualHost=/

# -----------------------------------------------------------------------------
# [CONFIGURE] ADMIN & APPLICATION
# -----------------------------------------------------------------------------
ADMIN_EMAIL=admin@yourcompany.com
APPLICATION_URL=https://localhost
FRONTEND_URL=https://localhost
CORS_ALLOWED_ORIGINS=https://localhost
SERVER_NAME=localhost

# -----------------------------------------------------------------------------
# DEPLOYMENT MODE (Configured by wizard)
# -----------------------------------------------------------------------------
SINGLE_TENANT_MODE=true
DEFAULT_TENANT_NAME="Your Organization"
DEFAULT_TENANT_SUBDOMAIN=app
SINGLE_TENANT_EXTERNAL_ACCOUNTS_ENABLED=false
ACCOUNT_LINKING_MODE=Standalone

# -----------------------------------------------------------------------------
# [CONFIGURE] AUTHENTICATION
# -----------------------------------------------------------------------------
ALLOW_LOCAL_LOGIN=false

# Azure AD
AZURE_AD_TENANT_ID=
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_ALLOWED_DOMAIN=

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_ALLOWED_DOMAIN=

# -----------------------------------------------------------------------------
# EMAIL (Optional)
# -----------------------------------------------------------------------------
Email__ServiceType=SMTP
Email__SmtpHost=
Email__SmtpPort=587
Email__Username=
Email__Password=
Email__UseSsl=true
Email__FromName=Portal
Email__FromAddress=

# -----------------------------------------------------------------------------
# DEFAULTS (Usually don't need to change)
# -----------------------------------------------------------------------------
STORAGE_DRIVER=Local
FILE_STORAGE_LOCAL_PATH=/app/uploads
Frontend__AppTitle=Portal
Frontend__DefaultLanguage=en
Frontend__MultiLanguageEnabled=false
Frontend__ShowTestWatermark=false
Frontend__Features__DarkModeEnabled=true
ADVANCED_SEARCH_ENABLED=true
Localization__DefaultLanguage=en-US
Localization__DefaultTimeZone=America/Panama
Serilog__MinimumLevel__Default=Warning
LOG_FILE_PATH=/app/logs/log-.txt
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://+:8080
HEALTH_CHECKS_ENABLED=true
HEALTH_CHECKS_PATH=/health
Hangfire__EnableDashboard=true
Hangfire__DashboardUrl=/hangfire

# -----------------------------------------------------------------------------
# CLAMAV ANTIVIRUS SCANNER (Optional - SEC-09)
# -----------------------------------------------------------------------------
# Real-time virus scanning for file uploads
# Requires ~1GB RAM and ~500MB disk for virus signatures
CLAMAV_ENABLED=false
CLAMAV_HOST=clamav
CLAMAV_PORT=3310
# Set to true to allow uploads when ClamAV is unavailable (NOT recommended)
# CLAMAV_FAIL_OPEN=false

# -----------------------------------------------------------------------------
# REPORT GENERATOR (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-report-generator.sh api|service|all
# Email settings above (Email__*) are automatically used for report delivery.
# REPORT_GENERATOR_VERSION=latest
# Customer database credentials (add as needed per report):
# CUSTOMER_DB_HOST=db.customer.com
# CUSTOMER_DB_NAME=customer_db
# CUSTOMER_DB_USER=report_user
# CUSTOMER_DB_PASSWORD=secret
