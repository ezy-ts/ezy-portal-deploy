# =============================================================================
# EZY Portal Configuration Template
# =============================================================================
# Copy this file to '../portal.env' and customize for your environment.
#
# REQUIRED settings are marked with [REQUIRED]
# Optional settings show their defaults
#
# Environment Variable Naming:
# - Use double underscores (__) for nested settings
# - Example: Email__SmtpHost maps to { "Email": { "SmtpHost": "..." } }
# =============================================================================

# -----------------------------------------------------------------------------
# INFRASTRUCTURE MODE
# -----------------------------------------------------------------------------
# full     - Deploy PostgreSQL, Redis, RabbitMQ as containers (use docker-compose.full.yml)
# external - Use existing infrastructure (use docker-compose.portal-only.yml)
INFRASTRUCTURE_MODE=full

# -----------------------------------------------------------------------------
# VERSION
# -----------------------------------------------------------------------------
VERSION=latest
PROJECT_NAME=ezy-portal

# -----------------------------------------------------------------------------
# [REQUIRED] DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_DB=portal
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# For INFRASTRUCTURE_MODE=full, use internal hostname:
# ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=portal;Username=postgres;Password=YOUR_PASSWORD

# For INFRASTRUCTURE_MODE=external, use your PostgreSQL server:
# POSTGRES_HOST=your-postgres-host
# POSTGRES_PORT=5432
ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=portal;Username=postgres;Password=CHANGE_THIS_SECURE_PASSWORD

# -----------------------------------------------------------------------------
# REDIS (Optional but recommended)
# -----------------------------------------------------------------------------
# For INFRASTRUCTURE_MODE=full:
REDIS_HOST=redis
REDIS_PORT=6379
ConnectionStrings__Redis=redis:6379

# For INFRASTRUCTURE_MODE=external:
# REDIS_HOST=your-redis-host
# REDIS_PORT=6379
# REDIS_PASSWORD=
# ConnectionStrings__Redis=your-redis-host:6379,password=your-password

# -----------------------------------------------------------------------------
# RABBITMQ (Optional - for Universal Search)
# -----------------------------------------------------------------------------
RabbitMq__Enabled=false

# For INFRASTRUCTURE_MODE=full:
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=portal
RABBITMQ_PASSWORD=CHANGE_THIS_PASSWORD
RABBITMQ_DEFAULT_USER=portal
RABBITMQ_DEFAULT_PASS=CHANGE_THIS_PASSWORD

# RabbitMQ application settings (when enabled):
# RabbitMq__Host=rabbitmq
# RabbitMq__Port=5672
# RabbitMq__User=portal
# RabbitMq__Password=CHANGE_THIS_PASSWORD
# RabbitMq__VirtualHost=/

# -----------------------------------------------------------------------------
# [REQUIRED] ADMIN USER
# -----------------------------------------------------------------------------
# This email will be auto-created as SuperAdmin on first startup
ADMIN_EMAIL=admin@yourcompany.com

# -----------------------------------------------------------------------------
# [REQUIRED] APPLICATION URLs
# -----------------------------------------------------------------------------
APPLICATION_URL=https://localhost
FRONTEND_URL=https://localhost
CORS_ALLOWED_ORIGINS=https://localhost

# Server name for nginx (domain without protocol)
SERVER_NAME=localhost

# -----------------------------------------------------------------------------
# DEPLOYMENT MODE
# -----------------------------------------------------------------------------
SINGLE_TENANT_MODE=true
DEFAULT_TENANT_NAME="Your Organization"
DEFAULT_TENANT_SUBDOMAIN=app

# -----------------------------------------------------------------------------
# AUTHENTICATION - Configure at least one OAuth provider
# -----------------------------------------------------------------------------

# --- Local Login (Email/Password) ---
ALLOW_LOCAL_LOGIN=false

# --- Azure AD (Microsoft Entra ID) ---
AZURE_AD_TENANT_ID=
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_ALLOWED_DOMAIN=

# --- Google OAuth ---
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_ALLOWED_DOMAIN=

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION
# -----------------------------------------------------------------------------
Email__ServiceType=SMTP
Email__SmtpHost=smtp.yourcompany.com
Email__SmtpPort=587
Email__Username=
Email__Password=
Email__UseSsl=true
Email__FromName=Portal
Email__FromAddress=noreply@yourcompany.com

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
STORAGE_DRIVER=Local
FILE_STORAGE_LOCAL_PATH=/app/uploads

# -----------------------------------------------------------------------------
# FRONTEND UI SETTINGS
# -----------------------------------------------------------------------------
Frontend__AppTitle=Portal
Frontend__DefaultLanguage=en
Frontend__MultiLanguageEnabled=false
Frontend__ShowTestWatermark=false
Frontend__Features__DarkModeEnabled=true

# -----------------------------------------------------------------------------
# LOCALIZATION
# -----------------------------------------------------------------------------
Localization__DefaultLanguage=en-US
Localization__DefaultTimeZone=America/Panama

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
Serilog__MinimumLevel__Default=Warning
LOG_FILE_PATH=/app/logs/log-.txt

# -----------------------------------------------------------------------------
# ASP.NET CORE
# -----------------------------------------------------------------------------
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://+:8080

# -----------------------------------------------------------------------------
# HEALTH CHECKS
# -----------------------------------------------------------------------------
HEALTH_CHECKS_ENABLED=true
HEALTH_CHECKS_PATH=/health

# -----------------------------------------------------------------------------
# HANGFIRE (Background Jobs)
# -----------------------------------------------------------------------------
Hangfire__EnableDashboard=true
Hangfire__DashboardUrl=/hangfire

# -----------------------------------------------------------------------------
# DEPLOYMENT SECRET (Auto-generated during installation)
# -----------------------------------------------------------------------------
# Used by DevOps scripts to automatically provision API keys for micro-services.
# This secret is generated during install.sh and should never be shared externally.
# If not set, the provision endpoint will return 503 Service Unavailable.
# DEPLOYMENT_SECRET=<auto-generated-64-chars>

# -----------------------------------------------------------------------------
# REPORT GENERATOR (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-report-generator.sh api|service|all
# Email settings above (Email__*) are automatically used for report delivery.

# Image version (default: latest)
# REPORT_GENERATOR_VERSION=latest

# Print server URL - internal endpoint for report generation API
# Used by portal and micro-services to generate PDF reports
# PRINT_SERVER_URL=http://ezy-report-generator-api:5127

# Customer-specific database credentials for reports
# Each report can use different databases. Add credentials as needed:
# CUSTOMER_DB_HOST=db.customer.com
# CUSTOMER_DB_NAME=customer_db
# CUSTOMER_DB_USER=report_user
# CUSTOMER_DB_PASSWORD=secret
