# =============================================================================
# EZY Portal Configuration Template
# =============================================================================
# Copy this file to '../portal.env' and customize for your environment.
#
# REQUIRED settings are marked with [REQUIRED]
# Optional settings show their defaults
#
# Environment Variable Naming:
# - Use double underscores (__) for nested settings
# - Example: Email__SmtpHost maps to { "Email": { "SmtpHost": "..." } }
# =============================================================================

# -----------------------------------------------------------------------------
# INFRASTRUCTURE MODE
# -----------------------------------------------------------------------------
# full     - Deploy PostgreSQL, Redis, RabbitMQ as containers (use docker-compose.full.yml)
# external - Use existing infrastructure (use docker-compose.portal-only.yml)
INFRASTRUCTURE_MODE=full

# -----------------------------------------------------------------------------
# VERSION
# -----------------------------------------------------------------------------
VERSION=latest
PROJECT_NAME=ezy-portal

# -----------------------------------------------------------------------------
# [REQUIRED] DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_DB=portal
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# For INFRASTRUCTURE_MODE=full, use internal hostname:
# ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=portal;Username=postgres;Password=YOUR_PASSWORD

# For INFRASTRUCTURE_MODE=external, use your PostgreSQL server:
# POSTGRES_HOST=your-postgres-host
# POSTGRES_PORT=5432
ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=portal;Username=postgres;Password=CHANGE_THIS_SECURE_PASSWORD

# -----------------------------------------------------------------------------
# REDIS (Optional but recommended)
# -----------------------------------------------------------------------------
# For INFRASTRUCTURE_MODE=full:
REDIS_HOST=redis
REDIS_PORT=6379
ConnectionStrings__Redis=redis:6379

# For INFRASTRUCTURE_MODE=external:
# REDIS_HOST=your-redis-host
# REDIS_PORT=6379
# REDIS_PASSWORD=
# ConnectionStrings__Redis=your-redis-host:6379,password=your-password

# -----------------------------------------------------------------------------
# RABBITMQ (Optional - for Universal Search)
# -----------------------------------------------------------------------------
RabbitMq__Enabled=false

# For INFRASTRUCTURE_MODE=full:
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=portal
RABBITMQ_PASSWORD=CHANGE_THIS_PASSWORD
RABBITMQ_DEFAULT_USER=portal
RABBITMQ_DEFAULT_PASS=CHANGE_THIS_PASSWORD

# RabbitMQ application settings (when enabled):
# RabbitMq__Host=rabbitmq
# RabbitMq__Port=5672
# RabbitMq__User=portal
# RabbitMq__Password=CHANGE_THIS_PASSWORD
# RabbitMq__VirtualHost=/

# -----------------------------------------------------------------------------
# [REQUIRED] ADMIN USER
# -----------------------------------------------------------------------------
# This email will be auto-created as SuperAdmin on first startup
ADMIN_EMAIL=admin@yourcompany.com

# -----------------------------------------------------------------------------
# [REQUIRED] APPLICATION URLs
# -----------------------------------------------------------------------------
APPLICATION_URL=https://localhost
FRONTEND_URL=https://localhost
CORS_ALLOWED_ORIGINS=https://localhost

# Server name for nginx (domain without protocol)
SERVER_NAME=localhost

# -----------------------------------------------------------------------------
# DEPLOYMENT MODE
# -----------------------------------------------------------------------------
SINGLE_TENANT_MODE=true
DEFAULT_TENANT_NAME="Your Organization"
DEFAULT_TENANT_SUBDOMAIN=app

# -----------------------------------------------------------------------------
# AUTHENTICATION - Configure at least one OAuth provider
# -----------------------------------------------------------------------------

# --- Local Login (Email/Password) ---
ALLOW_LOCAL_LOGIN=false

# --- Azure AD (Microsoft Entra ID) ---
AZURE_AD_TENANT_ID=
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_ALLOWED_DOMAIN=

# --- Google OAuth ---
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_ALLOWED_DOMAIN=

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION
# -----------------------------------------------------------------------------
Email__ServiceType=SMTP
Email__SmtpHost=smtp.yourcompany.com
Email__SmtpPort=587
Email__Username=
Email__Password=
Email__UseSsl=true
Email__FromName=Portal
Email__FromAddress=noreply@yourcompany.com

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
STORAGE_DRIVER=Local
FILE_STORAGE_LOCAL_PATH=/app/uploads

# -----------------------------------------------------------------------------
# FRONTEND UI SETTINGS
# -----------------------------------------------------------------------------
Frontend__AppTitle=Portal
Frontend__DefaultLanguage=en
Frontend__MultiLanguageEnabled=false
Frontend__ShowTestWatermark=false
Frontend__Features__DarkModeEnabled=true

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
# Universal Search - global search bar in top navigation
ADVANCED_SEARCH_ENABLED=true

# -----------------------------------------------------------------------------
# LOCALIZATION
# -----------------------------------------------------------------------------
Localization__DefaultLanguage=en-US
Localization__DefaultTimeZone=America/Panama

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
Serilog__MinimumLevel__Default=Warning
LOG_FILE_PATH=/app/logs/log-.txt

# -----------------------------------------------------------------------------
# ASP.NET CORE
# -----------------------------------------------------------------------------
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://+:8080

# -----------------------------------------------------------------------------
# HEALTH CHECKS
# -----------------------------------------------------------------------------
HEALTH_CHECKS_ENABLED=true
HEALTH_CHECKS_PATH=/health

# -----------------------------------------------------------------------------
# HANGFIRE (Background Jobs)
# -----------------------------------------------------------------------------
Hangfire__EnableDashboard=true
Hangfire__DashboardUrl=/hangfire

# -----------------------------------------------------------------------------
# DEPLOYMENT SECRET (Auto-generated during installation)
# -----------------------------------------------------------------------------
# Used by DevOps scripts to automatically provision API keys for micro-services.
# This secret is generated during install.sh and should never be shared externally.
# If not set, the provision endpoint will return 503 Service Unavailable.
# DEPLOYMENT_SECRET=<auto-generated-64-chars>

# -----------------------------------------------------------------------------
# ENCRYPTION KEY (Auto-generated during installation)
# -----------------------------------------------------------------------------
# Used by modules (e.g., prospects) to encrypt sensitive data at rest.
# Must be exactly 32 alphanumeric characters for AES-256 encryption.
# This key is generated during install.sh and should never be shared externally.
# ENCRYPTION_KEY=<auto-generated-32-chars>

# -----------------------------------------------------------------------------
# ITEMS MODULE (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-module.sh items
# Separated frontend/backend architecture - frontend served as static files.

# API key for items module (auto-provisioned if DEPLOYMENT_SECRET is set)
# ITEMS_API_KEY=

# Backend container version (default: latest)
# ITEMS_VERSION=latest

# Frontend artifact version (default: same as backend)
# ITEMS_FRONTEND_VERSION=latest

# -----------------------------------------------------------------------------
# BUSINESS PARTNERS MODULE (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-module.sh bp
# Separated frontend/backend architecture - frontend served as static files.

# API key for bp module (auto-provisioned if DEPLOYMENT_SECRET is set)
# BP_API_KEY=

# Backend container version (default: latest)
# BP_VERSION=latest

# Frontend artifact version (default: same as backend)
# BP_FRONTEND_VERSION=latest

# -----------------------------------------------------------------------------
# PROSPECTS MODULE (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-module.sh prospects
# Separated frontend/backend architecture - frontend served as static files.

# API key for prospects module (auto-provisioned if DEPLOYMENT_SECRET is set)
# PROSPECTS_API_KEY=

# Backend container version (default: latest)
# PROSPECTS_VERSION=latest

# Frontend artifact version (default: same as backend)
# PROSPECTS_FRONTEND_VERSION=latest

# -----------------------------------------------------------------------------
# PRICING-TAX MODULE (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-module.sh pricing-tax
# Separated frontend/backend architecture - frontend served as static files.

# API key for pricing-tax module (auto-provisioned if DEPLOYMENT_SECRET is set)
# PRICING_TAX_API_KEY=

# Backend container version (default: latest)
# PRICING_TAX_VERSION=latest

# Frontend artifact version (default: same as backend)
# PRICING_TAX_FRONTEND_VERSION=latest

# -----------------------------------------------------------------------------
# CRM MODULE (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-module.sh crm
# Sales pipeline management with opportunities and activities.

# API key for crm module (auto-provisioned if DEPLOYMENT_SECRET is set)
# CRM_API_KEY=

# Backend container version (default: latest)
# CRM_VERSION=latest

# Frontend artifact version (default: same as backend)
# CRM_FRONTEND_VERSION=latest

# -----------------------------------------------------------------------------
# SBO INSIGHTS MODULE (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-module.sh sbo-insights
# SAP Business One insights, dashboards, and analytics.

# API key for sbo-insights module (auto-provisioned if DEPLOYMENT_SECRET is set)
# SBO_INSIGHTS_API_KEY=

# Backend container version (default: latest)
# SBO_INSIGHTS_VERSION=latest

# Frontend artifact version (default: same as backend)
# SBO_INSIGHTS_FRONTEND_VERSION=latest

# SAP Data Source: "mssql", "hana", or "artifact"
# - mssql: Direct SQL Server connection to SAP Business One
# - hana: SAP HANA database connection
# - artifact: HTTP client for on-premise artifact connector
SBO_INSIGHTS_DATA_SOURCE=mssql

# MSSQL Configuration (when SBO_INSIGHTS_DATA_SOURCE=mssql)
# Direct connection to SAP Business One SQL Server database
SBO_INSIGHTS_MSSQL_SERVER=host.docker.internal
SBO_INSIGHTS_MSSQL_PORT=1433
SBO_INSIGHTS_MSSQL_USER=sa
SBO_INSIGHTS_MSSQL_PASSWORD=CHANGE_ME
SBO_INSIGHTS_MSSQL_DATABASE=YOUR_SAP_COMPANY_DB
SBO_INSIGHTS_MSSQL_ENCRYPT=disable

# SAP HANA Configuration (when SBO_INSIGHTS_DATA_SOURCE=hana)
# Connection to SAP Business One HANA version
# SBO_INSIGHTS_HANA_HOST=your-hana-server
# SBO_INSIGHTS_HANA_PORT=30015
# SBO_INSIGHTS_HANA_USER=SYSTEM
# SBO_INSIGHTS_HANA_PASSWORD=CHANGE_ME
# SBO_INSIGHTS_HANA_DATABASE=YOUR_SAP_COMPANY_DB
# SBO_INSIGHTS_HANA_TLS=false

# Artifact Client Configuration (when SBO_INSIGHTS_DATA_SOURCE=artifact)
# For cloud deployment connecting to on-premise artifact server
# SBO_INSIGHTS_ARTIFACT_BASE_URL=https://your-artifact-server:8080
# SBO_INSIGHTS_ARTIFACT_API_KEY=your-api-key
# SBO_INSIGHTS_ARTIFACT_TIMEOUT=30
# SBO_INSIGHTS_ARTIFACT_INSECURE_SKIP_VERIFY=false

# -----------------------------------------------------------------------------
# REPORT GENERATOR (Optional)
# -----------------------------------------------------------------------------
# Install with: ./add-report-generator.sh api|service|all
# Email settings above (Email__*) are automatically used for report delivery.

# Image version (default: latest)
# REPORT_GENERATOR_VERSION=latest

# Print server URL - internal endpoint for report generation API
# Used by portal and micro-services to generate PDF reports
# PRINT_SERVER_URL=http://ezy-report-generator-api:5127

# Customer-specific database credentials for reports
# Each report can use different databases. Add credentials as needed:
# CUSTOMER_DB_HOST=db.customer.com
# CUSTOMER_DB_NAME=customer_db
# CUSTOMER_DB_USER=report_user
# CUSTOMER_DB_PASSWORD=secret
